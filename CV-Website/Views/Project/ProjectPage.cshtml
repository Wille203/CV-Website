@model CV_Website.Models.Project

<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
             <h2 class="text-center">@Model.Title</h2>

           
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Beskrivning</h5>
                    <p class="card-text">@Model.Description</p>
                </div>
            </div>

            
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Information</h5>
                    <p class="card-text">@Model.Information</p>
                </div>
            </div>

           
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Skapare</h5>
                    <a href="@Url.Action("GoToUserPage", "User", new { userId = Model.Creator.UserId })">
                        <strong>@Model.Creator.Name</strong>
                    </a>

                </div>
            </div>

         
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Personer i projektet</h5>
                    @if (Model.Users != null && Model.Users.Any())
                    {
                        <ul class="list-group">
                            @foreach (var user in Model.Users)
                            {
                                
                                <a href="@Url.Action("GoToUserPage", "User", new { userId = user.UserId })">
                                    @user.Name
                                </a>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="text-muted">Finns inga personer i detta projekt.</p>
                    }
                    @if (User.Identity.IsAuthenticated)
                    {

                        string loggedInUserId = ViewData["LoggedInUserId"]?.ToString();
                        bool isUserInProject = Model.Users.Any(u => u.UserId.ToString() == loggedInUserId);

                            @if (isUserInProject)
                            {
                                <td><a asp-controller="Project" asp-action="JoinProject" asp-route-id="@Model.ProjectId">Gå med</a></td>
                            }

                            else
                            {
                                <td><a asp-controller="Project" asp-action="LeaveProject" asp-route-id="@Model.ProjectId">Lämna</a></td>
                            }
                    }

                 
                </div>
            </div>
        </div>
    </div>
</div>
